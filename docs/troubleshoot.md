# トラブル事例

MC-Portを利用する中で遭遇しやすい問題とその対処法をまとめます。

## ポートが割り当てられない
- **症状**: `allocate` を実行してもエラーが返る。
- **原因**: 設定されたポート範囲がすべて使用中、もしくはストアファイルが壊れている。
- **対処**:
  1. `mcportctl list` で現在割り当てられているポートを確認し、不要なプロセスを終了する。
  2. ストアファイルをバックアップした上で空にし、デーモンを再起動する。

## サービス一覧に期待した情報が表示されない
- **症状**: `register` 実行後に `/services` を確認してもサービスが追加されていない。
- **原因**: 登録時のJSONが不正、もしくはネットワーク障害で登録リクエストが届いていない。
- **対処**:
  1. クライアントログを確認して送信内容を検証する。
  2. デーモン側のログにエラーが出ていないか調べ、必要に応じて再送する。

## デーモンが起動しない
- **症状**: `mcportd` 起動時にエラーを出して終了する。
- **原因**: 設定ファイルのパス誤りや権限不足、ポート競合など。
- **対処**:
  1. 設定ファイルの内容とパスを確認する。
  2. ログに表示される詳細メッセージを元に権限設定やポート利用状況を確認する。

上記以外の問題が発生した場合は、ログファイルを添えてIssueを報告してください。
