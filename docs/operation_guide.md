# 開発環境運用手順

本書ではMC-Portを用いた開発環境を運用する際の基本的な手順を示します。CI環境でも
ほぼ同様の手順で動作させることを想定しています。

1. **MC-Portデーモンの起動**
   - `mcportd` バイナリを実行し、設定ファイルへのパスを指定します。
   - systemdユニットを用意する場合は`docs/setup_guide.md`の例を参照してください。
2. **MCPサーバーの起動**
   - クライアントライブラリを組み込んだMCPサーバーから`allocate`を呼び出し、
     割り当てられたポートでサーバープロセスを起動します。
   - サービス登録(`register`)を忘れずに行うことで管理UIに反映されます。
3. **サービス一覧の確認**
   - `mcportctl list` または `/services` APIを使用して現在登録されているサービスを確認
     できます。
4. **ポートの解放**
   - サーバー停止時には`release`を実行し、ポートを明示的に解放します。これを怠ると
     次回起動時に重複ポートが発生する可能性があります。
5. **ログ管理**
   - デーモンのログは`/var/log/mcport`等に出力されます。運用状況に応じてログローテー
     ションを設定してください。

以上の運用フローを守ることで、開発環境内で安定したポート管理を実現できます。
