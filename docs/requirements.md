# 要件定義

MC-Portの提供する機能およびシステム要件を以下にまとめます。これらは最小実装を
想定したものであり、将来的に拡張される可能性があります。

## 機能要件
1. **ポートの自動割り当て**
   - 設定されたポート範囲から未使用ポートを検出し、クライアントへ返却する。
   - 同一ポートの二重割り当てを防ぐため、割り当て情報を永続化する。
2. **サービス登録管理**
   - MCPサーバーは割り当てられたポート番号とサービス名・説明を登録できる。
   - 登録情報は一覧取得可能で、JSON形式で返却する。
3. **ポート解放**
   - 使用を終えたポートは`release`操作により解放できる。解放後は再割り当て対象と
     なる。

## 非機能要件
1. **動作環境**
   - LinuxおよびmacOSでの動作を必須とし、可能な範囲でWindowsもサポートする。
2. **パフォーマンス**
   - 1秒以内にポート割り当てを完了できること。
3. **セキュリティ**
   - 基本的には同一マシン内での利用を前提とするが、必要に応じて簡易なトークン認証
     を提供する。
4. **保守性**
   - 設定やデータストアを外部ファイルとして分離し、コード変更なしに環境差異へ対応
     できるようにする。
5. **配布形式**
   - アプリケーションはDXT形式のパッケージとして配布できること。`dxt`ツールで
     生成可能なメタデータファイルを備え、主要プラットフォーム向けに同一手順で
     展開できることを保証する。

## 将来検討事項
- REST API越しに複数ホストから利用可能にするための認証方式
- 使用量統計やポート利用状況の可視化

以上が現時点での要求定義です。
